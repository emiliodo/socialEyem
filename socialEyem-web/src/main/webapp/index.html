<!DOCTYPE html>
<html>
    <head>
        <title>Start Page</title>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <script src="https://apis.google.com/js/client:platform.js" async defer></script>
    </head>
    <body>


    <center>
        
        <div id="contenidologin" style=" margin:0 auto;">
            <h1>social eyem</h1>
            <span id="signinButton">
                <button class="g-signin"
                        data-scope="email"
                        data-clientid="1004446024731-a4bo8mvhguacp0r41gq7gpee44fqmvk1.apps.googleusercontent.com"
                        data-callback="onSignInCallback"
                        data-theme="dark"
                        data-cookiepolicy="single_host_origin">
                </button>
            </span>

            <!-- Container with the Sign-In button. -->
            <div id="gConnect" class="button">

                <!-- Textarea for outputting data -->
                <div id="response" class="hide">
                    <textarea id="responseContainer" style="width:80%; height:150px"></textarea>
                </div>
            </div>
        </div>
    </center>


    <script type="text/javascript">
        /**
         * Handler for the signin callback triggered after the user selects an account.
         * 
         */
        function onSignInCallback(resp) {
            gapi.client.load('plus', 'v1', apiClientLoaded);
        }

        /**
         * Sets up an API call after the Google API client loads.
         */
        function apiClientLoaded() {
            gapi.client.plus.people.get({userId: 'me'}).execute(handleEmailResponse);
        }

        /**
         * Response callback for when the API client receives a response.
         *
         * @param resp The API response object with the user email and profile information.
         */
        function handleEmailResponse(resp) {
            var primaryEmail;
            for (var i = 0; i < resp.emails.length; i++) {
                if (resp.emails[i].type === 'account')
                    primaryEmail = resp.emails[i].value;
            }
            document.getElementById('responseContainer').value = 'Primary email: ' +
                    primaryEmail + '\n\Imagen: ' + resp.image.url +
                    "\nNombre: " + resp.displayName + "\n\n" +
                    JSON.stringify(resp);

            window.location.replace("timeline.xhtml");
        }

    </script>

</body>
</html>






